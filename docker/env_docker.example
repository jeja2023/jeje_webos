# ============================================================
# JeJe WebOS Docker 环境配置模板
# ============================================================
#
# 使用说明:
#   1. 复制此文件: cp env_docker.example env_docker
#   2. 根据您的环境修改下方配置
#   3. 运行: docker-compose up -d
#
# 安全警告:
#   - 生产环境务必修改所有密码和密钥！
#   - 不要将 env_docker 提交到版本控制
#
# ============================================================


# ==================== 应用配置 ====================

# 应用名称（显示在页面标题等位置）
APP_NAME=JeJe WebOS

# 应用版本
APP_VERSION=2.4.19

# 是否开启调试模式 (true/false)
# 生产环境请务必设置为 false
DEBUG=false

# 应用访问端口 (浏览器访问端口)
APP_PORT=9000

# MySQL 外部访问端口
# 如果本地已有 MySQL 占用 3306，请改为 3307 或其他端口
MYSQL_PORT=3306

# Redis 外部访问端口
REDIS_PORT=6379


# ==================== 数据库配置 ====================
# ⚠️ 生产环境请务必修改默认密码！

# 数据库名称
DB_NAME=jeje_webos

# 数据库用户名（应用使用此账户连接）
DB_USER=jeje

# 数据库密码（应用使用此密码连接）
# ⚠️ 请修改为强密码！
DB_PASSWORD=jeje_123456

# MySQL root 密码（仅用于数据库初始化和管理）
# ⚠️ 请修改为强密码！
MYSQL_ROOT_PASSWORD=root_123456


# ==================== Redis 配置 ====================

# Redis 密码（留空表示无密码，生产环境建议设置）
REDIS_PASSWORD=


# ==================== JWT 配置 ====================

# JWT 签名密钥（用于用户登录令牌加密）
# ⚠️ 生产环境必须修改！至少 32 个字符的随机字符串
# 可用此命令生成: openssl rand -hex 32
JWT_SECRET=change_this_secret_key_in_production_min_32_chars

# JWT 令牌有效期（分钟）
# 默认 10080 = 7 天
JWT_EXPIRE_MINUTES=10080

# --- JWT 密钥自动轮换 ---
# 是否启用自动轮换 (true/false)
JWT_AUTO_ROTATE=true
# 轮换间隔最小值（天）
JWT_ROTATE_INTERVAL_MIN=25
# 轮换间隔最大值（天）
JWT_ROTATE_INTERVAL_MAX=35
# 每日检查时间（小时，0-23）
JWT_ROTATE_CHECK_HOUR=2


# ==================== 默认管理员账户 ====================
# ⚠️ 首次启动后请立即登录并修改密码！

# 管理员用户名
ADMIN_USERNAME=admin

# 管理员初始密码
# ⚠️ 首次登录后请立即修改！
ADMIN_PASSWORD=Admin@123

# 管理员手机号
ADMIN_PHONE=13800138000

# 管理员昵称
ADMIN_NICKNAME=系统管理员


# ==================== 其它安全配置 ====================

# 是否启用 CSRF 校验
CSRF_ENABLED=false

# 即时通讯消息加密密钥（生产环境请修改）
# ⚠️ 必须是 32 位随机字符串并进行 base64 编码
IM_ENCRYPTION_KEY=Mre_8JUhRwDDvA18jDXlYKMNGSrX5azMVv02fE-2T08=


# ==================== 文件上传配置 ====================

# 最大上传文件大小（字节）
# 默认 104857600 = 100MB
MAX_UPLOAD_SIZE=104857600


# ==================== 审计日志配置 ====================

# 是否记录所有操作（包括查看操作）
# true  = 记录所有操作（安全性高，但日志量大）
# false = 仅记录修改操作（增删改）
AUDIT_ALL_OPERATIONS=true


# ==================== 速率限制配置 ====================

# 是否启用速率限制 (true/false)
RATE_LIMIT_ENABLED=true

# 全局请求限制（次/分钟），Docker环境建议适当调大以防误封网关IP
RATE_LIMIT_REQUESTS=2000

# 速率限制封禁时长 (秒)
RATE_LIMIT_BLOCK_DURATION=30

# 是否信任本地访问 (true/false)
RATE_LIMIT_ENABLE_WHITELIST_LOCALHOST=true
