# JeJe WebOS 配置文件模板
# 复制此文件为 .env 并根据实际环境修改配置

# --- 应用配置 ---
APP_NAME=JeJe WebOS
APP_VERSION=2.5.24
DEBUG=true  # 开发模式建议开启，生产环境请设置为 false

# --- 数据库配置 ---
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=jeje_webos
# 数据库连接池设置 (优化高并发性能)
DB_POOL_SIZE=10               # 基础连接池大小 (默认10)
DB_MAX_OVERFLOW=20            # 最大溢出连接数 (默认20, 允许 burst)
DB_POOL_RECYCLE=3600          # 连接回收时间 (秒, 防止 MySQL wait_timeout 断连)

# --- Redis配置 ---
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=  # Redis 访问密码（如果有的话）

# --- JWT 安全配置 ---
# 注意：生产环境务必修改 JWT_SECRET 为强随机字符串
JWT_SECRET=your-super-secret-key-change-this
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=10080     # Token 有效期（分钟）

# --- JWT 密钥自动轮换 ---
JWT_AUTO_ROTATE=true          # 是否启用自动轮换
JWT_ROTATE_INTERVAL_MIN=25    # 轮换间隔最小值（天）
JWT_ROTATE_INTERVAL_MAX=35    # 轮换间隔最大值（天）
JWT_ROTATE_CHECK_HOUR=2       # 每日检查时间（小时，0-23）
JWT_ROTATE_CHECK_MINUTE=0     # 每日检查时间（分钟，0-59）

# --- 默认管理员账户配置 (首次启动有效) ---
ADMIN_USERNAME=admin
ADMIN_PASSWORD=Admin@123
ADMIN_PHONE=13800138000
ADMIN_NICKNAME=系统管理员

# --- 文件存储规范 ---
UPLOAD_DIR=storage            # 存储根目录，禁止改为 storage/uploads
MAX_UPLOAD_SIZE=104857600     # 最大上传限制 (字节，当前 100MB)
MODULES_DIR=modules           # 模块业务目录

# --- 审计与安全 ---
# true = 记录所有操作（包含查看）；false = 只记录写操作
AUDIT_ALL_OPERATIONS=false
# true = 强制开启 CSRF 校验
CSRF_ENABLED=false

# --- 速率限制 (防暴力破解) ---
RATE_LIMIT_REQUESTS=1000      # 每分钟允许的最大请求数
RATE_LIMIT_WINDOW=60          # 计数窗口 (秒)
RATE_LIMIT_BLOCK_DURATION=30  # 封禁时长 (秒)
RATE_LIMIT_ENABLE_WHITELIST_LOCALHOST=true  # 是否信任本地访问

# --- CORS（生产环境建议收紧）---
# 开发可留空或 *；生产建议填写具体前端域名，例如：
# ALLOW_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# --- 认证：HttpOnly Cookie 存 Token（防 XSS 窃取）---
AUTH_USE_HTTPONLY_COOKIE=true   # true=Token 仅通过 Cookie 下发，前端不存 localStorage；需 CORS credentials

# --- 即时通讯消息加密密钥 ---
IM_ENCRYPTION_KEY=你的加密密钥
