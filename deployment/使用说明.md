# JeJe WebOS NAS éƒ¨ç½²æŒ‡å— (v2.5.32)

æœ¬æŒ‡å—é€‚ç”¨äºåœ¨ **é£ç‰›NAS (FnOS)**ã€ç¾¤æ™– (Synology)ã€å¨è”é€š (QNAP) ç­‰ NAS è®¾å¤‡ä¸Šé€šè¿‡ Docker éƒ¨ç½² JeJe WebOSã€‚

---

## ğŸ“¦ éƒ¨ç½²åŒ…å†…å®¹

```
deployment/
â”œâ”€â”€ jeje_webos_v2.5.32.tar    # Docker é•œåƒæ–‡ä»¶ (çº¦ 800MB)
â”œâ”€â”€ docker-compose.yml       # Docker æœåŠ¡ç¼–æ’é…ç½®
â”œâ”€â”€ env_docker               # ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
â”œâ”€â”€ storage/                 # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â””â”€â”€ modules/
â”‚       â”œâ”€â”€ ai/ai_models/    # AI æ¨¡å‹å­˜æ”¾ä½ç½®
â”‚       â”œâ”€â”€ ocr/ocr_models/  # OCR æ¨¡å‹å­˜æ”¾ä½ç½®
â”‚       â””â”€â”€ map/map_tiles/   # ç¦»çº¿åœ°å›¾ç“¦ç‰‡å­˜æ”¾ä½ç½®
â””â”€â”€ ä½¿ç”¨è¯´æ˜.md              # æœ¬æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½² (5æ­¥å®Œæˆ)

### æ­¥éª¤ 1: ä¸Šä¼ éƒ¨ç½²åŒ…

åœ¨ NAS æ–‡ä»¶ç®¡ç†å™¨ä¸­åˆ›å»ºä¸€ä¸ªç›®å½•ï¼ˆå¦‚ `docker/jeje_webos`ï¼‰ï¼Œå°†ä»¥ä¸‹å†…å®¹ä¸Šä¼ ï¼š

- [x] `jeje_webos_v2.5.32.tar` - é•œåƒæ–‡ä»¶
- [x] `docker-compose.yml` - ç¼–æ’é…ç½®
- [x] `env_docker` - ç¯å¢ƒå˜é‡
- [x] `storage/` æ–‡ä»¶å¤¹ - **åŠ¡å¿…å®Œæ•´ä¸Šä¼ **

### æ­¥éª¤ 2: SSH è¿æ¥ NAS

1. **å¼€å¯ SSH**: ç™»å½• NAS ç½‘é¡µç«¯ â†’ è®¾ç½® â†’ SSH â†’ å¯ç”¨
2. **è¿æ¥å‘½ä»¤**:
   ```bash
   ssh æ‚¨çš„ç”¨æˆ·å@NAS_IPåœ°å€ -p 22
   # ç¤ºä¾‹: ssh admin@192.168.1.100 -p 22
   ```

### æ­¥éª¤ 3: å¯¼å…¥ Docker é•œåƒ

```bash
# è¿›å…¥éƒ¨ç½²ç›®å½•ï¼ˆä»¥é£ç‰›NASä¸ºä¾‹ï¼Œè·¯å¾„å¯èƒ½æ˜¯ /vol1/1000/docker/jeje_webosï¼‰
cd /vol1
find . -name "jeje_webos_v2.5.32.tar"   # æŸ¥æ‰¾å®é™…è·¯å¾„
cd /vol1/xxx/docker/jeje_webos          # è¿›å…¥æ‰¾åˆ°çš„ç›®å½•

# è®¾ç½®æƒé™ï¼ˆé‡è¦ï¼ï¼‰
chmod -R 777 .

# å¯¼å…¥é•œåƒï¼ˆéœ€è¦å‡ åˆ†é’Ÿï¼‰
sudo docker load -i jeje_webos_v2.5.32.tar

# éªŒè¯å¯¼å…¥æˆåŠŸ
docker images | grep jeje
# åº”æ˜¾ç¤º: jeje_webos   v2.4.9   xxx   xxx   çº¦800MB
```

### æ­¥éª¤ 4: ä¿®æ”¹é…ç½® (å¯é€‰)

ç¼–è¾‘ `env_docker` æ–‡ä»¶ï¼ŒæŒ‰éœ€ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `APP_PORT` | åº”ç”¨è®¿é—®ç«¯å£ | 9000 |
| `ADMIN_PASSWORD` | ç®¡ç†å‘˜å¯†ç  | Admin@123 |
| `JWT_SECRET` | JWT å¯†é’¥ (å»ºè®®ä¿®æ”¹) | éšæœºå­—ç¬¦ä¸² |
| `DB_PASSWORD` | æ•°æ®åº“å¯†ç  | jeje_123456 |
| `MYSQL_ROOT_PASSWORD` | MySQL root å¯†ç  | root_123456 |

> ğŸ’¡ **å®‰å…¨æç¤º**: ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®ä¿®æ”¹æ‰€æœ‰å¯†ç å’Œå¯†é’¥é…ç½®ï¼

### æ­¥éª¤ 5: å¯åŠ¨æœåŠ¡

```bash
# ç¡®ä¿åœ¨ docker-compose.yml æ‰€åœ¨ç›®å½•
chmod -R 777 .

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
sudo docker compose up -d

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
sudo docker compose logs -f app
```

> ğŸ“ å¦‚æç¤º `docker-compose: command not found`ï¼Œè¯·ä½¿ç”¨ `docker compose`ï¼ˆä¸­é—´æœ‰ç©ºæ ¼ï¼‰

### ğŸ‰ è®¿é—®åº”ç”¨

å¯åŠ¨å®Œæˆåï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://æ‚¨çš„NAS_IP:9000`

**é»˜è®¤è´¦å·**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `Admin@123`ï¼ˆæˆ–æ‚¨åœ¨ `env_docker` ä¸­é…ç½®çš„å¯†ç ï¼‰

---

## ğŸ¤– AI æ¨¡å‹éƒ¨ç½² (å¼ºçƒˆæ¨è)

AI åŠ©æ‰‹åŠŸèƒ½éœ€è¦æœ¬åœ°å¤§è¯­è¨€æ¨¡å‹æ”¯æŒã€‚

### æ¨èæ¨¡å‹

| æ¨¡å‹ | è§„æ ¼ | ä¸‹è½½é“¾æ¥ |
|------|------|----------|
| **Qwen2.5-Coder-7B** (æ¨è) | 4.4GB, Q4é‡åŒ– | [HuggingFace](https://huggingface.co/Qwen/Qwen2.5-Coder-7B-Instruct-GGUF/resolve/main/qwen2.5-coder-7b-instruct-q4_k_m.gguf) / [ModelScope](https://modelscope.cn/models/qwen/Qwen2.5-Coder-7B-Instruct-GGUF/files) |
| Qwen2.5-1.5B | 1.2GB, è½»é‡ç‰ˆ | [ModelScope](https://modelscope.cn/models/qwen/Qwen2.5-1.5B-Instruct-GGUF/files) |

### éƒ¨ç½²æ­¥éª¤

1. ä¸‹è½½ `.gguf` æ¨¡å‹æ–‡ä»¶
2. ä¸Šä¼ åˆ° NAS çš„ `storage/modules/ai/ai_models/` ç›®å½•
3. é‡å¯åº”ç”¨æœåŠ¡: `sudo docker compose restart app`

> âš ï¸ **æ³¨æ„**: 7B æ¨¡å‹éœ€è¦çº¦ 8GB å†…å­˜ï¼Œè¯·ç¡®ä¿ NAS å†…å­˜å……è¶³ã€‚å†…å­˜ä¸è¶³æ—¶å»ºè®®ä½¿ç”¨ 1.5B è½»é‡æ¨¡å‹ã€‚

---

## ğŸ“· OCR æ¨¡å‹éƒ¨ç½² (å¯é€‰)

å›¾æ–‡è¯†åˆ«åŠŸèƒ½é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨ä»ç½‘ç»œä¸‹è½½æ¨¡å‹ã€‚å¦‚ NAS ç½‘ç»œå—é™ï¼Œå¯æ‰‹åŠ¨éƒ¨ç½²ï¼š

### æ‰€éœ€æ–‡ä»¶

| æ–‡ä»¶å | ç”¨é€” |
|--------|------|
| `ch_PP-OCRv4_det_infer.onnx` | æ–‡å­—æ£€æµ‹æ¨¡å‹ |
| `ch_PP-OCRv4_rec_infer.onnx` | æ–‡å­—è¯†åˆ«æ¨¡å‹ |
| `ch_ppocr_mobile_v2.0_cls_infer.onnx` | æ–¹å‘åˆ†ç±»æ¨¡å‹ |

### éƒ¨ç½²æ­¥éª¤

1. å‚ç…§ `storage/modules/ocr/ocr_models/` ç›®å½•ä¸­çš„è¯´æ˜æ–‡ä»¶ä¸‹è½½æ¨¡å‹
2. å°† 3 ä¸ª `.onnx` æ–‡ä»¶æ”¾å…¥è¯¥ç›®å½•
3. é‡å¯åº”ç”¨å³å¯ä½¿ç”¨ç¦»çº¿ OCR

---

## ğŸ—ºï¸ ç¦»çº¿åœ°å›¾éƒ¨ç½² (å¯é€‰)

æ”¯æŒåŠ è½½ç¦»çº¿åœ°å›¾ç“¦ç‰‡ï¼Œé€‚åˆå†…ç½‘ç¯å¢ƒä½¿ç”¨ã€‚

### éƒ¨ç½²æ­¥éª¤

1. å‡†å¤‡ XYZ æ ¼å¼ç“¦ç‰‡åŒ…ï¼ˆç›®å½•ç»“æ„: `{z}/{x}/{y}.png`ï¼‰
2. å°†æ•´ä¸ªç“¦ç‰‡æ–‡ä»¶å¤¹æ”¾å…¥ `storage/modules/map/map_tiles/` ç›®å½•
3. æ–‡ä»¶å¤¹åç§°å³ä¸ºåœ°å›¾å›¾å±‚åç§°ï¼ˆå»ºè®®ä½¿ç”¨è‹±æ–‡ï¼‰
4. åˆ·æ–°ç½‘é¡µï¼Œåœ¨åœ°å›¾å›¾å±‚åˆ—è¡¨ä¸­é€‰æ‹©ä½¿ç”¨

---

## ğŸ“ æ•°æ®æŒä¹…åŒ–è¯´æ˜

æœ¬éƒ¨ç½²æ–¹æ¡ˆé‡‡ç”¨**æœ¬åœ°ç›®å½•æ˜ å°„**ï¼Œæ‰€æœ‰æ•°æ®ç›´æ¥å­˜å‚¨åœ¨ NAS æ–‡ä»¶ç³»ç»Ÿä¸­ï¼š

| æ•°æ®ç±»å‹ | å­˜å‚¨ä½ç½® |
|----------|----------|
| ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ | `./storage/` |
| AI æ¨¡å‹ | `./storage/modules/ai/ai_models/` |
| OCR æ¨¡å‹ | `./storage/modules/ocr/ocr_models/` |
| ç¦»çº¿åœ°å›¾ | `./storage/modules/map/map_tiles/` |
| MySQL æ•°æ® | Docker Volume: `jeje-mysql-data` |
| Redis ç¼“å­˜ | Docker Volume: `jeje-redis-data` |

**å¤‡ä»½å»ºè®®**: å®šæœŸå¤‡ä»½ `storage/` ç›®å½•å’Œå¯¼å‡º MySQL æ•°æ®å³å¯å®Œæ•´ä¿ç•™æ‰€æœ‰ç”¨æˆ·æ•°æ®ã€‚

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: AI/OCR æ¨¡å‹æ— æ³•åŠ è½½

**ç—‡çŠ¶**: æ—¥å¿—æ˜¾ç¤º `æœªæ‰¾åˆ°å¯ç”¨çš„æœ¬åœ°æ¨¡å‹`

**è¯Šæ–­æ–¹æ³•**:
```bash
# è¿›å…¥å®¹å™¨æ£€æŸ¥
sudo docker exec -it jeje-webos-app /bin/bash

# æ£€æŸ¥æ¨¡å‹ç›®å½•
ls -la /app/storage/modules/ai/ai_models/
ls -la /app/storage/modules/ocr/ocr_models/
```

**è§£å†³æ–¹æ¡ˆ**:

```bash
# 1. ç¡®ä¿ç›®å½•æƒé™æ­£ç¡®
chmod -R 777 ./storage

# 2. é‡å¯æœåŠ¡
sudo docker compose restart app

# 3. å¦‚æœä»ä¸ç”Ÿæ•ˆï¼Œå¼ºåˆ¶é‡å»ºå®¹å™¨
sudo docker compose down
sudo docker compose up -d --force-recreate
```

### é—®é¢˜ 2: æµè§ˆå™¨ç¼“å­˜å¯¼è‡´çš„ 404 é”™è¯¯

**ç—‡çŠ¶**: é¡µé¢æ˜¾ç¤ºå¼‚å¸¸æˆ–èµ„æºåŠ è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æŒ‰ `Ctrl + Shift + Delete` æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. æŒ‰ `F12` â†’ Application â†’ Service Workers â†’ Unregister
3. æŒ‰ `Ctrl + F5` å¼ºåˆ¶åˆ·æ–°

### é—®é¢˜ 3: å®¹å™¨å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: `docker compose up` åå®¹å™¨åå¤é‡å¯

**è¯Šæ–­æ–¹æ³•**:
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
sudo docker compose logs app
sudo docker compose logs mysql
```

**å¸¸è§åŸå› åŠè§£å†³æ–¹æ¡ˆ**:
- **ç«¯å£å†²çª**: ä¿®æ”¹ `env_docker` ä¸­çš„ `APP_PORT`
- **MySQL åˆå§‹åŒ–æ…¢**: é¦–æ¬¡å¯åŠ¨éœ€ç­‰å¾… 2-3 åˆ†é’Ÿï¼Œå±æ­£å¸¸ç°è±¡
- **æƒé™ä¸è¶³**: æ‰§è¡Œ `chmod -R 777 .` åé‡è¯•

### é—®é¢˜ 4: å†…å­˜ä¸è¶³å¯¼è‡´ AI åŠŸèƒ½å¼‚å¸¸

**ç—‡çŠ¶**: AI å¯¹è¯æ—¶æœåŠ¡å´©æºƒæˆ–å“åº”è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆå¦‚ 1.5B ç‰ˆæœ¬ï¼‰
- åœ¨ `docker-compose.yml` ä¸­è°ƒæ•´ `shm_size` å€¼
- å…³é—­ä¸ä½¿ç”¨çš„æ¨¡å—ä»¥é‡Šæ”¾å†…å­˜

---

## ğŸ”„ ç‰ˆæœ¬å‡çº§æŒ‡å—

### å‡çº§æ­¥éª¤

```bash
# 1. å¤‡ä»½æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰
cp -r ./storage ./storage_backup_$(date +%Y%m%d)

# 2. åœæ­¢æ—§æœåŠ¡
sudo docker compose down

# 3. ä¸Šä¼ å¹¶å¯¼å…¥æ–°ç‰ˆæœ¬é•œåƒ
sudo docker load -i jeje_webos_væ–°ç‰ˆæœ¬.tar

# 4. æ›´æ–° docker-compose.yml ä¸­çš„é•œåƒç‰ˆæœ¬å·
# image: jeje_webos:væ–°ç‰ˆæœ¬

# 5. å¯åŠ¨æ–°ç‰ˆæœ¬
sudo docker compose up -d
```

---

## ğŸ—‘ï¸ å®Œå…¨å¸è½½ (é‡è£…æŒ‡å—)

å¦‚éœ€å½»åº•æ¸…é™¤æ‰€æœ‰æ•°æ®é‡æ–°å®‰è£…ï¼š

```bash
# 1. åœæ­¢å¹¶åˆ é™¤å®¹å™¨åŠæ•°æ®å·
sudo docker compose down -v

# 2. åˆ é™¤æœ¬åœ°å­˜å‚¨ç›®å½•
rm -rf ./storage ./logs

# 3. åˆ é™¤é•œåƒï¼ˆå¯é€‰ï¼‰
sudo docker rmi jeje_webos:v2.5.32

# 4. æ¸…ç† Docker ç¼“å­˜ï¼ˆå¯é€‰ï¼‰
sudo docker system prune -f
```

> âš ï¸ **è­¦å‘Š**: ä»¥ä¸Šæ“ä½œå°†åˆ é™¤æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼Œè¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦æ–‡ä»¶ï¼

---

## ğŸ“ è·å–å¸®åŠ©

- **é¡¹ç›®ä¸»é¡µ**: [GitHub - JeJe WebOS](https://github.com/jeja2023/jeje_webos)
- **é—®é¢˜åé¦ˆ**: [æäº¤ Issue](https://github.com/jeja2023/jeje_webos/issues)
- **æ›´æ–°æ—¥å¿—**: æŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½• `æ›´æ–°æ—¥å¿—.md`
